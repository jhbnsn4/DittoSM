<div class="container">
    <div>
        <img />
    </div>

    <!-- Profile Image -->
    <form [formGroup]="profileImageForm" (ngSubmit)="onProfileImageSubmit()">
        <div class="mb-3" *ngIf="editingImage">
            <label for="imageInput">Profile Picture</label>
            <input type="file" class="form-control" id="imageInput" name="imageFile" (change)="onImageLoad($event)"
                accept="image/png, image/jpeg">
            <button type="submit" class="btn btn-dark">Change Profile Picture</button>
        </div>
        <img [src]="profileImage" height="150" width="200px" (click)="onProfilImageClick()" (mouseover)="mouseOverProfile = true"
        (mouseout)="mouseOverProfile = false">
        <p *ngIf="mouseOverProfile&&editable">Click to edit</p>
    </form>

    <!-- Entire thing -->
    <div class="row">
        <!-- Form stuff -->
        <div class="col-4 p-4 me-5">
            <!-- User profile legend + edit btn -->
            <div class="row justify-content-between">
                <div class="col p-0 mb-1 align-self-center">
                    <legend class="pb-0 mb-0 ">User Profile</legend>
                </div>
                <div *ngIf='editable' class="col-2 p-0 mb-1 align-self-end border">
                    <button data-bs-toggle="button" class="btn btn-light" (click)="onClickEdit()">
                        <i class="bi bi-pencil-fill "></i>
                    </button>
                </div>
            </div>
            <!-- The actual form -->
            <div class="row ">
                <form class="p-0">
                    <fieldset id="profileFieldset" disabled>
                        <!-- [className]="editing ? '-plaintext': ''" -->
                        <div class="row">
                            <div class="col-3 align-self-center">First Name:</div>
                            <div class="col">
                                <input type="text"
                                    [className]="editing ? 'form-control animated': 'form-control-plaintext'"
                                    [(ngModel)]="firstName" name="firstNameInput">
                            </div>
                        </div>
                        <!-- <div class="" -->
                        <div class="row">
                            <div class="col-3 align-self-center">Last Name:</div>
                            <div class="col">
                                <input type="text" [className]="editing ? 'form-control': 'form-control-plaintext'"
                                    [(ngModel)]="lastName" name="lastNameInput">
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-3 align-self-center">Birthday:</div>
                            <div class="col">
                                <input type="date" [className]="editing ? 'form-control': 'form-control-plaintext'"
                                    [value]="parseDate()" (input)="setBirthDate($event)" name="birthday">
                            </div>
                        </div>
                        <span>Status: </span>
                        <div class="mb-2">
                            <textarea type="text" rows="5" style="resize: none;"
                                [className]="editing ? 'form-control': 'form-control-plaintext'"
                                [(ngModel)]="statusText" name="statusInput"></textarea>
                        </div>

                        <div class="mb-2" *ngIf="editing">
                            <button class="btn btn-dark" (click)="onClickEdit()">Cancel</button>
                            <button class="btn btn-success" (click)="onClickUpdateProfile()">Update Profile</button>
                        </div>

                    </fieldset>
                </form>
            </div>

        </div>
        <div class="col">
            <div *ngIf = 'editable' class="row">
                <app-create-post></app-create-post>
            </div>
            <div class="row">
                <app-posts [events]="eventsSubject.asObservable()"></app-posts>
            </div>
        </div>

    </div>



</div>